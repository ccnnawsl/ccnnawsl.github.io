import{a as H,n as A,o as G,p as J,q as K,r as X,s as Z,t as ee,u as oe,v as te,w as le,x as ae,y as ne,z as re}from"./element-plus-DG-KFbsU.js";import{y as se,z as ue,i as ie}from"./@element-plus-Biv1i3Lr.js";import{F as I}from"./Floor-DNq21HcD.js";import{a as ce}from"./index-DJ0_G3px.js";import"./index-CH6Kknzp.js";import{_ as me}from"./plugin-vueexport-helper-DlAUqK2U.js";import{d as de}from"./pinia-bwPzSWSQ.js";import{r as h,f as pe,s as F,c as v,a as m,O as t,Q as n,F as M,a7 as S,R as Y,W as fe,o as d,U as k,u as y,V as B}from"./@vue-BP6QxIZ4.js";import"./lodash-es-BB-zMWwC.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BRAxSmoj.js";import"./dayjs-DuEr9S7h.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./axios-CCb-kr4I.js";import"./vue-router-BRKpR0c2.js";import"./pinia-plugin-persistedstate-BQU3TZ4K.js";import"./destr-CVtkxrq9.js";import"./deep-pick-omit-CegYQlcN.js";import"./mockjs-DPji7F7J.js";const _e=de("dynamicTags",()=>{const p=h(["0","3866"]);return{dynamicTags:p,addTag:r=>{p.value.includes(r)?H({showClose:!0,type:"error",message:"请勿重复标记"}):p.value.push(r)},removeTag:r=>{const c=p.value.indexOf(r);c!==-1&&p.value.splice(c,1)}}},{persist:!0}),ve={class:"main"},ge={class:"title"},he={class:"row"},ye={class:"row"},Ce={class:"content"},ke=["onDblclick"],xe={key:0},De={key:1},Te=["innerHTML"],Ve={class:"under"},we={__name:"38447162",setup(p){const a=h({floor:"",search:"",timerange:["2023-11-19 00:00","2099-11-19 00:00"],mode:!1}),g=h(null);pe(async()=>{const e=await ce(38447162);g.value=e.data});const r=F(()=>{if(g.value===null)return[];let e=g.value;const{floor:o,search:_,timerange:s,mode:u}=a.value;return _==""&&s[0]=="2023-11-19 00:00"&&s[1]=="2099-11-19 00:00"&&!u||(_!=""&&(e=e.filter(i=>i.username.includes(_)||i.comment.includes(_))),(s[0]!="2023-11-19 00:00"||s[1]!="2099-11-19 00:00")&&(e=e.filter(i=>new Date(i.time)>=new Date(s[0])&&new Date(i.time)<=new Date(s[1]))),u&&(e=e.filter(i=>i.username=="kngchau"))),e}),c=h(1),f=h(50),P=F(()=>{const e=(c.value-1)*f.value,o=e+f.value;return r.value.slice(e,o)}),x=e=>{c.value=e,window.scrollTo({top:0,behavior:"smooth"})},D=e=>{f.value=e},T=()=>{const e=r.value.findIndex(o=>o.floor===a.value.floor);e!==-1?(c.value=Math.floor(e/f.value)+1,setTimeout(()=>{document.getElementById(a.value.floor).scrollIntoView({behavior:"smooth"})},0)):a.value.floor!=""&&H.error("不存在此楼层")},C=_e(),U=e=>{C.removeTag(e)},L=e=>{a.value.floor=e,T()},N=e=>{C.addTag(e)},$=()=>{a.value.floor="",a.value.search="",a.value.timerange=["2023-11-19 00:00","2099-11-19 00:00"],a.value.mode=!1},V=e=>g.value.find(o=>o.floor===e);return(e,o)=>{const _=A,s=K,u=X,i=Z,w=ee,R=oe,E=G,j=te,O=le,q=ae,z=J,Q=ne,W=re;return d(),v("div",ve,[m("div",ge,[m("div",he,[o[6]||(o[6]=m("h3",null," [mygo直播贴]被朋友拉来直播mygo了，模拟追番，一天一集(尽量)不多看(第13/13话) ",-1)),t(_,{href:"https://bbs.nga.cn/read.php?tid=38447162",target:"_blank",underline:!1},{default:n(()=>o[5]||(o[5]=[k("前往原帖 ")])),_:1})]),t(E,{inline:!0,model:a.value},{default:n(()=>[t(u,null,{default:n(()=>[t(s,{placeholder:"搜索内容","prefix-icon":y(se),modelValue:a.value.search,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.search=l),clearable:""},null,8,["prefix-icon","modelValue"])]),_:1}),t(u,null,{default:n(()=>[t(i,{modelValue:a.value.timerange,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.timerange=l),type:"datetimerange",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",clearable:!1},null,8,["modelValue"])]),_:1}),t(u,null,{default:n(()=>[t(w,{modelValue:a.value.mode,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.mode=l),"inactive-text":"史官精选","active-text":"只看楼主"},null,8,["modelValue"])]),_:1}),t(u,null,{default:n(()=>[t(R,{type:"primary",icon:y(ue),onClick:$},{default:n(()=>o[7]||(o[7]=[k(" 重置 ")])),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),t(E,{inline:!0,model:a.value},{default:n(()=>[t(u,{label:"转到楼层:"},{default:n(()=>[t(s,{placeholder:"请输入",modelValue:a.value.floor,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.floor=l),onChange:o[4]||(o[4]=l=>T()),clearable:""},null,8,["modelValue"])]),_:1}),t(q,{content:"双击楼层可进行标记，单击标记可跳转到对应楼层",placement:"right"},{default:n(()=>[t(u,{label:"已标记楼层:"},{default:n(()=>[t(j,null,{default:n(()=>[t(y(ie))]),_:1}),(d(!0),v(M,null,S(y(C).dynamicTags,l=>(d(),Y(O,{size:"large",closable:"",key:l,onClose:b=>U(l),onClick:b=>L(l)},{default:n(()=>[k(B(l),1)]),_:2},1032,["onClose","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["model"]),m("div",ye,[t(z,{onCurrentChange:x,onSizeChange:D,"current-page":c.value,"page-sizes":[20,50,100,200,500,2e3],"page-size":f.value,layout:"total, sizes, prev, pager, next, jumper",total:r.value.length},null,8,["current-page","page-size","total"])]),m("div",Ce,[(d(!0),v(M,null,S(P.value,l=>(d(),v("div",{key:l.floor,onDblclick:b=>N(l.floor)},[l.reply==""?(d(),v("div",xe,[t(I,{floorData:l},null,8,["floorData"])])):(d(),v("div",De,[t(Q,{placement:"top",trigger:"hover",width:"60vw"},{reference:n(()=>[t(I,{floorData:l},null,8,["floorData"])]),default:n(()=>[m("p",null,B(V(l.reply).username)+"：",1),m("div",{innerHTML:V(l.reply).comment},null,8,Te)]),_:2},1024)]))],40,ke))),128)),r.value==""?(d(),Y(W,{key:0})):fe("",!0)]),m("div",Ve,[t(z,{onCurrentChange:x,onSizeChange:D,"current-page":c.value,"page-sizes":[20,50,100,200,500,2e3],"page-size":f.value,layout:"total, sizes, prev, pager, next, jumper",total:r.value.length},null,8,["current-page","page-size","total"])])])])}}},Ae=me(we,[["__scopeId","data-v-ca5cc468"]]);export{Ae as default};
