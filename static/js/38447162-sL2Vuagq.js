import{a as P,n as J,o as K,v as X,p as Z,q as ee,r as oe,s as te,t as le,u as ae,w as ne,x as re,y as se,z as ue}from"./element-plus-BuldVant.js";import{_ as ie,a as ce}from"./Title-Culmw17J.js";import{y as me,z as de,i as pe}from"./@element-plus-DkpmeDBV.js";import{a as _e}from"./index-UlE4Ehwe.js";import"./index-DQzOSIim.js";import{_ as fe}from"./plugin-vueexport-helper-DlAUqK2U.js";import{d as ve}from"./pinia-Du9Eba9j.js";import{r as v,f as ge,s as S,c as d,O as t,Q as n,a as y,_ as he,F as T,a7 as Y,R as B,W as ye,o as i,U as x,u as C,V as H}from"./@vue-Dj_Q2L4-.js";import"./lodash-es-BB-zMWwC.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-KVm8AqGA.js";import"./dayjs-DuEr9S7h.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./axios-CCb-kr4I.js";import"./vue-router-CrFKb4tt.js";import"./pinia-plugin-persistedstate-BQU3TZ4K.js";import"./destr-CVtkxrq9.js";import"./deep-pick-omit-CegYQlcN.js";import"./mockjs-DPji7F7J.js";const Ce=ve("dynamicTags",()=>{const p=v(["0","3866"]);return{dynamicTags:p,addTag:c=>{p.value.includes(c)?P({showClose:!0,type:"error",message:"请勿重复标记"}):p.value.push(c)},removeTag:c=>{const m=p.value.indexOf(c);m!==-1&&p.value.splice(m,1)}}},{persist:!0}),De={class:"pagination"},Te={class:"content"},xe=["onDblclick"],Ve={key:0},ke={key:1},be=["innerHTML"],we={class:"pagination"},Ee={__name:"38447162",setup(p){const a=v({floor:"",search:"",timerange:["2023-11-19 00:00","2099-11-19 00:00"],mode:!1}),g=v(null),c=v(!1);ge(async()=>{c.value=!0;const e=await _e(38447162);g.value=e.data,c.value=!1});const m=S(()=>{if(g.value===null)return[];let e=g.value;const{floor:o,search:f,timerange:r,mode:s}=a.value;return f==""&&r[0]=="2023-11-19 00:00"&&r[1]=="2099-11-19 00:00"&&!s||(f!=""&&(e=e.filter(u=>u.username.includes(f)||u.comment.includes(f))),(r[0]!="2023-11-19 00:00"||r[1]!="2099-11-19 00:00")&&(e=e.filter(u=>new Date(u.time)>=new Date(r[0])&&new Date(u.time)<=new Date(r[1]))),s&&(e=e.filter(u=>u.username=="kngchau"))),e}),h=v(1),_=v(50),U=S(()=>{const e=(h.value-1)*_.value,o=e+_.value;return m.value.slice(e,o)}),V=e=>{h.value=e,window.scrollTo({top:0,behavior:"smooth"})},k=e=>_.value=e,b=()=>{const e=m.value.findIndex(o=>o.floor===a.value.floor);e!==-1?(h.value=Math.floor(e/_.value)+1,setTimeout(()=>{document.getElementById(a.value.floor).scrollIntoView({behavior:"smooth"})},0)):a.value.floor!=""&&P.error("不存在此楼层")},D=Ce(),L=e=>D.removeTag(e),N=e=>{a.value.floor=e,b()},$=e=>D.addTag(e),R=()=>{a.value.floor="",a.value.search="",a.value.timerange=["2023-11-19 00:00","2099-11-19 00:00"],a.value.mode=!1},w=e=>g.value.find(o=>o.floor===e);return(e,o)=>{const f=ie,r=Z,s=ee,u=oe,E=te,j=le,z=J,O=ae,q=ne,Q=re,I=K,F=ce,W=se,A=ue,G=X;return i(),d(T,null,[t(f,{url:"https://bbs.nga.cn/read.php?tid=38447162"},{default:n(()=>o[5]||(o[5]=[x(" [mygo直播贴]被朋友拉来直播mygo了，模拟追番，一天一集(尽量)不多看(第13/13话) ")])),_:1}),t(z,{inline:!0,model:a.value},{default:n(()=>[t(s,null,{default:n(()=>[t(r,{placeholder:"搜索内容","prefix-icon":C(me),modelValue:a.value.search,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.search=l),clearable:""},null,8,["prefix-icon","modelValue"])]),_:1}),t(s,null,{default:n(()=>[t(u,{modelValue:a.value.timerange,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.timerange=l),type:"datetimerange",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",clearable:!1},null,8,["modelValue"])]),_:1}),t(s,null,{default:n(()=>[t(E,{modelValue:a.value.mode,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.mode=l),"inactive-text":"史官精选","active-text":"只看楼主"},null,8,["modelValue"])]),_:1}),t(s,null,{default:n(()=>[t(j,{type:"primary",icon:C(de),onClick:R},{default:n(()=>o[6]||(o[6]=[x(" 重置 ")])),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),t(z,{inline:!0,model:a.value},{default:n(()=>[t(s,{label:"转到楼层:"},{default:n(()=>[t(r,{placeholder:"请输入",modelValue:a.value.floor,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.floor=l),onChange:o[4]||(o[4]=l=>b()),clearable:""},null,8,["modelValue"])]),_:1}),t(Q,{content:"双击楼层可进行标记，单击标记可跳转到对应楼层",placement:"right"},{default:n(()=>[t(s,{label:"已标记楼层:"},{default:n(()=>[t(O,null,{default:n(()=>[t(C(pe))]),_:1}),(i(!0),d(T,null,Y(C(D).dynamicTags,l=>(i(),B(q,{size:"large",closable:"",key:l,onClose:M=>L(l),onClick:M=>N(l)},{default:n(()=>[x(H(l),1)]),_:2},1032,["onClose","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["model"]),y("div",De,[t(I,{onCurrentChange:V,onSizeChange:k,"current-page":h.value,"page-sizes":[20,50,100,200],"page-size":_.value,layout:"total, sizes, prev, pager, next, jumper",total:m.value.length},null,8,["current-page","page-size","total"])]),he((i(),d("div",Te,[(i(!0),d(T,null,Y(U.value,l=>(i(),d("div",{key:l.floor,onDblclick:M=>$(l.floor)},[l.reply==""?(i(),d("div",Ve,[t(F,{floorData:l},null,8,["floorData"])])):(i(),d("div",ke,[t(W,{placement:"top",trigger:"hover",width:"60vw"},{reference:n(()=>[t(F,{floorData:l},null,8,["floorData"])]),default:n(()=>[y("p",null,H(w(l.reply).username)+"：",1),y("div",{innerHTML:w(l.reply).comment},null,8,be)]),_:2},1024)]))],40,xe))),128)),m.value==""?(i(),B(A,{key:0})):ye("",!0)])),[[G,c.value]]),y("div",we,[t(I,{onCurrentChange:V,onSizeChange:k,"current-page":h.value,"page-sizes":[20,50,100,200],"page-size":_.value,layout:"total, sizes, prev, pager, next, jumper",total:m.value.length},null,8,["current-page","page-size","total"])])],64)}}},Je=fe(Ee,[["__scopeId","data-v-02cbbb67"]]);export{Je as default};
