import{a as P,n as J,o as K,p as X,v as Z,q as ee,r as oe,s as te,t as le,u as ae,w as ne,x as re,y as se,z as ue,A as ie}from"./element-plus-C2-o9urr.js";import{y as ce,z as de,i as me}from"./@element-plus-C4dRVgWp.js";import{F}from"./Floor-B2eljADL.js";import{a as pe}from"./index-BHTNu0ql.js";import"./index-0X4mmap6.js";import{_ as fe}from"./plugin-vueexport-helper-DlAUqK2U.js";import{d as ve}from"./pinia-DrdcT0Kg.js";import{r as g,f as _e,s as M,c as m,a as p,O as t,Q as n,_ as ge,F as S,a7 as Y,R as B,W as he,o as i,U as D,u as C,V as H}from"./@vue-DFiAumaG.js";import"./lodash-es-BB-zMWwC.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DMnIyKCN.js";import"./dayjs-DuEr9S7h.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./axios-CCb-kr4I.js";import"./vue-router-BNLiiXca.js";import"./pinia-plugin-persistedstate-BQU3TZ4K.js";import"./destr-CVtkxrq9.js";import"./deep-pick-omit-CegYQlcN.js";import"./mockjs-DPji7F7J.js";const ye=ve("dynamicTags",()=>{const f=g(["0","3866"]);return{dynamicTags:f,addTag:c=>{f.value.includes(c)?P({showClose:!0,type:"error",message:"请勿重复标记"}):f.value.push(c)},removeTag:c=>{const d=f.value.indexOf(c);d!==-1&&f.value.splice(d,1)}}},{persist:!0}),Ce={class:"main"},ke={class:"title"},De={class:"row"},we={class:"row"},xe={class:"content"},Te=["onDblclick"],Ve={key:0},Ee={key:1},ze=["innerHTML"],be={class:"under"},Ie={__name:"38447162",setup(f){const a=g({floor:"",search:"",timerange:["2023-11-19 00:00","2099-11-19 00:00"],mode:!1}),h=g(null),c=g(!1);_e(async()=>{c.value=!0;const e=await pe(38447162);h.value=e.data,c.value=!1});const d=M(()=>{if(h.value===null)return[];let e=h.value;const{floor:o,search:_,timerange:r,mode:s}=a.value;return _==""&&r[0]=="2023-11-19 00:00"&&r[1]=="2099-11-19 00:00"&&!s||(_!=""&&(e=e.filter(u=>u.username.includes(_)||u.comment.includes(_))),(r[0]!="2023-11-19 00:00"||r[1]!="2099-11-19 00:00")&&(e=e.filter(u=>new Date(u.time)>=new Date(r[0])&&new Date(u.time)<=new Date(r[1]))),s&&(e=e.filter(u=>u.username=="kngchau"))),e}),y=g(1),v=g(50),L=M(()=>{const e=(y.value-1)*v.value,o=e+v.value;return d.value.slice(e,o)}),w=e=>{y.value=e,window.scrollTo({top:0,behavior:"smooth"})},x=e=>{v.value=e},T=()=>{const e=d.value.findIndex(o=>o.floor===a.value.floor);e!==-1?(y.value=Math.floor(e/v.value)+1,setTimeout(()=>{document.getElementById(a.value.floor).scrollIntoView({behavior:"smooth"})},0)):a.value.floor!=""&&P.error("不存在此楼层")},k=ye(),U=e=>{k.removeTag(e)},N=e=>{a.value.floor=e,T()},$=e=>{k.addTag(e)},R=()=>{a.value.floor="",a.value.search="",a.value.timerange=["2023-11-19 00:00","2099-11-19 00:00"],a.value.mode=!1},V=e=>h.value.find(o=>o.floor===e);return(e,o)=>{const _=J,r=ee,s=oe,u=te,E=le,j=ae,z=K,O=ne,q=re,A=se,b=X,Q=ue,W=ie,G=Z;return i(),m("div",Ce,[p("div",ke,[p("div",De,[o[6]||(o[6]=p("h3",null," [mygo直播贴]被朋友拉来直播mygo了，模拟追番，一天一集(尽量)不多看(第13/13话) ",-1)),t(_,{href:"https://bbs.nga.cn/read.php?tid=38447162",target:"_blank",underline:!1},{default:n(()=>o[5]||(o[5]=[D("前往原帖 ")])),_:1})]),t(z,{inline:!0,model:a.value},{default:n(()=>[t(s,null,{default:n(()=>[t(r,{placeholder:"搜索内容","prefix-icon":C(ce),modelValue:a.value.search,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.search=l),clearable:""},null,8,["prefix-icon","modelValue"])]),_:1}),t(s,null,{default:n(()=>[t(u,{modelValue:a.value.timerange,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.timerange=l),type:"datetimerange",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",clearable:!1},null,8,["modelValue"])]),_:1}),t(s,null,{default:n(()=>[t(E,{modelValue:a.value.mode,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.mode=l),"inactive-text":"史官精选","active-text":"只看楼主"},null,8,["modelValue"])]),_:1}),t(s,null,{default:n(()=>[t(j,{type:"primary",icon:C(de),onClick:R},{default:n(()=>o[7]||(o[7]=[D(" 重置 ")])),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),t(z,{inline:!0,model:a.value},{default:n(()=>[t(s,{label:"转到楼层:"},{default:n(()=>[t(r,{placeholder:"请输入",modelValue:a.value.floor,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.floor=l),onChange:o[4]||(o[4]=l=>T()),clearable:""},null,8,["modelValue"])]),_:1}),t(A,{content:"双击楼层可进行标记，单击标记可跳转到对应楼层",placement:"right"},{default:n(()=>[t(s,{label:"已标记楼层:"},{default:n(()=>[t(O,null,{default:n(()=>[t(C(me))]),_:1}),(i(!0),m(S,null,Y(C(k).dynamicTags,l=>(i(),B(q,{size:"large",closable:"",key:l,onClose:I=>U(l),onClick:I=>N(l)},{default:n(()=>[D(H(l),1)]),_:2},1032,["onClose","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["model"]),p("div",we,[t(b,{onCurrentChange:w,onSizeChange:x,"current-page":y.value,"page-sizes":[20,50,100,200],"page-size":v.value,layout:"total, sizes, prev, pager, next, jumper",total:d.value.length},null,8,["current-page","page-size","total"])]),ge((i(),m("div",xe,[(i(!0),m(S,null,Y(L.value,l=>(i(),m("div",{key:l.floor,onDblclick:I=>$(l.floor)},[l.reply==""?(i(),m("div",Ve,[t(F,{floorData:l},null,8,["floorData"])])):(i(),m("div",Ee,[t(Q,{placement:"top",trigger:"hover",width:"60vw"},{reference:n(()=>[t(F,{floorData:l},null,8,["floorData"])]),default:n(()=>[p("p",null,H(V(l.reply).username)+"：",1),p("div",{innerHTML:V(l.reply).comment},null,8,ze)]),_:2},1024)]))],40,Te))),128)),d.value==""?(i(),B(W,{key:0})):he("",!0)])),[[G,c.value]]),p("div",be,[t(b,{onCurrentChange:w,onSizeChange:x,"current-page":y.value,"page-sizes":[20,50,100,200],"page-size":v.value,layout:"total, sizes, prev, pager, next, jumper",total:d.value.length},null,8,["current-page","page-size","total"])])])])}}},Xe=fe(Ie,[["__scopeId","data-v-9cd3eed1"]]);export{Xe as default};
