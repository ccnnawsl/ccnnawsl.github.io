import{i as D,y as Qe,n as Ee,e as Ze,f as oe,u as Se,k as Je,_ as Ge,w as et,m as tt}from"./plugin-vue_export-helper-CtlaOrQ8.js";import{c as m,E as Ne,s as Z,r as z,b as O,W as Ie,t as k,z as Fe,o as Ve,I as Be,a7 as ot,G as ne,e as He,ab as nt,v as at,f as h,j as S,q as g,F as ae,k as w,u as a,m as Y,K as H,g as F,h as A,Q as X,y as se,p as st,l as lt,N as rt,M as q,n as it,H as Pe}from"./index-4A0nx5rV.js";import{u as le,d as ut,a as ct}from"./use-global-config-DpMeVtmo.js";import{i as Te,V as dt,w as pt,x as ft,E as M,t as vt}from"./index-QXzD6j6R.js";import{m as mt}from"./typescript-Bp3YSIOJ.js";import{u as ht}from"./el-popper-CMJ6spjP.js";import{U as re}from"./event-BB_Ol6Sd.js";import{f as yt,a as gt}from"./constants-Dnj8X3EN.js";import{u as bt}from"./index-CEUX45Mu.js";import{u as wt,a as xt}from"./use-form-common-props-DvoJbAoa.js";const Ct=()=>D&&/firefox/i.test(window.navigator.userAgent);class Et extends Error{constructor(n){super(n),this.name="ElementPlusError"}}function Jt(e,n){throw new Et(`[${e}] ${n}`)}function Gt(e,n){}let Q;const eo=e=>{var n;if(!D)return 0;if(Q!==void 0)return Q;const s=document.createElement("div");s.className=`${e}-scrollbar__wrap`,s.style.visibility="hidden",s.style.width="100px",s.style.position="absolute",s.style.top="-9999px",document.body.appendChild(s);const o=s.offsetWidth;s.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",s.appendChild(l);const i=l.offsetWidth;return(n=s.parentNode)==null||n.removeChild(s),Q=o-i,Q};function to(e,n){if(!D)return;if(!n){e.scrollTop=0;return}const s=[];let o=n.offsetParent;for(;o!==null&&e!==o&&e.contains(o);)s.push(o),o=o.offsetParent;const l=n.offsetTop+s.reduce((c,p)=>c+p.offsetTop,0),i=l+n.offsetHeight,u=e.scrollTop,r=u+e.clientHeight;l<u?e.scrollTop=l:i>r&&(e.scrollTop=i-e.clientHeight)}const St=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),It=["class","style"],Ft=/^on[A-Z]/,Pt=(e={})=>{const{excludeListeners:n=!1,excludeKeys:s}=e,o=m(()=>((s==null?void 0:s.value)||[]).concat(It)),l=Ne();return l?m(()=>{var i;return Qe(Object.entries((i=l.proxy)==null?void 0:i.$attrs).filter(([u])=>!o.value.includes(u)&&!(n&&Ft.test(u))))}):m(()=>({}))};function Tt(e){let n;function s(){if(e.value==null)return;const{selectionStart:l,selectionEnd:i,value:u}=e.value;if(l==null||i==null)return;const r=u.slice(0,Math.max(0,l)),c=u.slice(Math.max(0,i));n={selectionStart:l,selectionEnd:i,value:u,beforeTxt:r,afterTxt:c}}function o(){if(e.value==null||n==null)return;const{value:l}=e.value,{beforeTxt:i,afterTxt:u,selectionStart:r}=n;if(i==null||u==null||r==null)return;let c=l.length;if(l.endsWith(u))c=l.length-u.length;else if(l.startsWith(i))c=i.length;else{const p=i[r-1],b=l.indexOf(p,r-1);b!==-1&&(c=b+1)}e.value.setSelectionRange(c,c)}return[s,o]}function zt(e,{beforeFocus:n,afterFocus:s,beforeBlur:o,afterBlur:l}={}){const i=Ne(),{emit:u}=i,r=Z(),c=z(!1),p=y=>{Ie(n)&&n(y)||c.value||(c.value=!0,u("focus",y),s==null||s())},b=y=>{var E;Ie(o)&&o(y)||y.relatedTarget&&((E=r.value)!=null&&E.contains(y.relatedTarget))||(c.value=!1,u("blur",y),l==null||l())},v=()=>{var y,E;(y=r.value)!=null&&y.contains(document.activeElement)&&r.value!==document.activeElement||(E=e.value)==null||E.focus()};return O(r,y=>{y&&y.setAttribute("tabindex","-1")}),le(r,"focus",p,!0),le(r,"blur",b,!0),le(r,"click",v,!0),{isFocused:c,wrapperRef:r,handleFocus:p,handleBlur:b}}function kt({afterComposition:e,emit:n}){const s=z(!1),o=r=>{n==null||n("compositionstart",r),s.value=!0},l=r=>{var c;n==null||n("compositionupdate",r);const p=(c=r.target)==null?void 0:c.value,b=p[p.length-1]||"";s.value=!St(b)},i=r=>{n==null||n("compositionend",r),s.value&&(s.value=!1,k(()=>e(r)))};return{isComposing:s,handleComposition:r=>{r.type==="compositionend"?i(r):l(r)},handleCompositionStart:o,handleCompositionUpdate:l,handleCompositionEnd:i}}const Nt=()=>{const e=Fe(yt,void 0),n=Fe(gt,void 0);return{form:e,formItem:n}},Vt=(e,{formItemContext:n,disableIdGeneration:s,disableIdManagement:o})=>{s||(s=z(!1)),o||(o=z(!1));const l=z();let i;const u=m(()=>{var r;return!!(!(e.label||e.ariaLabel)&&n&&n.inputIds&&((r=n.inputIds)==null?void 0:r.length)<=1)});return Ve(()=>{i=O([Be(e,"id"),s],([r,c])=>{const p=r??(c?void 0:bt().value);p!==l.value&&(n!=null&&n.removeInputId&&(l.value&&n.removeInputId(l.value),!(o!=null&&o.value)&&!c&&p&&n.addInputId(p)),l.value=p)},{immediate:!0})}),ot(()=>{i&&i(),n!=null&&n.removeInputId&&l.value&&n.removeInputId(l.value)}),{isLabeledByFormItem:u,inputId:l}};let C;const Bt=`
  height:0 !important;
  visibility:hidden !important;
  ${Ct()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Ht=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Lt(e){const n=window.getComputedStyle(e),s=n.getPropertyValue("box-sizing"),o=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),l=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:Ht.map(u=>`${u}:${n.getPropertyValue(u)}`).join(";"),paddingSize:o,borderSize:l,boxSizing:s}}function ze(e,n=1,s){var o;C||(C=document.createElement("textarea"),document.body.appendChild(C));const{paddingSize:l,borderSize:i,boxSizing:u,contextStyle:r}=Lt(e);C.setAttribute("style",`${r};${Bt}`),C.value=e.value||e.placeholder||"";let c=C.scrollHeight;const p={};u==="border-box"?c=c+i:u==="content-box"&&(c=c-l),C.value="";const b=C.scrollHeight-l;if(Ee(n)){let v=b*n;u==="border-box"&&(v=v+l+i),c=Math.max(v,c),p.minHeight=`${v}px`}if(Ee(s)){let v=b*s;u==="border-box"&&(v=v+l+i),c=Math.min(v,c)}return p.height=`${c}px`,(o=C.parentNode)==null||o.removeChild(C),C=void 0,p}const Rt=Ze({id:{type:String,default:void 0},size:ut,disabled:Boolean,modelValue:{type:oe([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:oe([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Te},prefixIcon:{type:Te},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:oe([Object,Array,String]),default:()=>mt({})},autofocus:Boolean,rows:{type:Number,default:2},...ht(["ariaLabel"])}),$t={[re]:e=>ne(e),input:e=>ne(e),change:e=>ne(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},At=He({name:"ElInput",inheritAttrs:!1}),Mt=He({...At,props:Rt,emits:$t,setup(e,{expose:n,emit:s}){const o=e,l=nt(),i=at(),u=m(()=>{const t={};return o.containerRole==="combobox"&&(t["aria-haspopup"]=l["aria-haspopup"],t["aria-owns"]=l["aria-owns"],t["aria-expanded"]=l["aria-expanded"]),t}),r=m(()=>[o.type==="textarea"?ie.b():d.b(),d.m(E.value),d.is("disabled",x.value),d.is("exceed",Oe.value),{[d.b("group")]:i.prepend||i.append,[d.m("prefix")]:i.prefix||o.prefixIcon,[d.m("suffix")]:i.suffix||o.suffixIcon||o.clearable||o.showPassword,[d.bm("suffix","password-clear")]:U.value&&G.value,[d.b("hidden")]:o.type==="hidden"},l.class]),c=m(()=>[d.e("wrapper"),d.is("focus",j.value)]),p=Pt({excludeKeys:m(()=>Object.keys(u.value))}),{form:b,formItem:v}=Nt(),{inputId:y}=Vt(o,{formItemContext:v}),E=wt(),x=xt(),d=Se("input"),ie=Se("textarea"),K=Z(),I=Z(),J=z(!1),W=z(!1),ue=z(),_=Z(o.inputStyle),N=m(()=>K.value||I.value),{wrapperRef:Le,isFocused:j,handleFocus:Re,handleBlur:$e}=zt(N,{beforeFocus(){return x.value},afterBlur(){var t;o.validateEvent&&((t=v==null?void 0:v.validate)==null||t.call(v,"blur").catch(f=>void 0))}}),ce=m(()=>{var t;return(t=b==null?void 0:b.statusIcon)!=null?t:!1}),L=m(()=>(v==null?void 0:v.validateState)||""),de=m(()=>L.value&&dt[L.value]),Ae=m(()=>W.value?pt:ft),Me=m(()=>[l.style]),pe=m(()=>[o.inputStyle,_.value,{resize:o.resize}]),P=m(()=>Je(o.modelValue)?"":String(o.modelValue)),U=m(()=>o.clearable&&!x.value&&!o.readonly&&!!P.value&&(j.value||J.value)),G=m(()=>o.showPassword&&!x.value&&!o.readonly&&!!P.value&&(!!P.value||j.value)),V=m(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!x.value&&!o.readonly&&!o.showPassword),ee=m(()=>P.value.length),Oe=m(()=>!!V.value&&ee.value>Number(o.maxlength)),De=m(()=>!!i.suffix||!!o.suffixIcon||U.value||o.showPassword||V.value||!!L.value&&ce.value),[Ke,We]=Tt(K);ct(I,t=>{if(_e(),!V.value||o.resize!=="both")return;const f=t[0],{width:B}=f.contentRect;ue.value={right:`calc(100% - ${B+15+6}px)`}});const R=()=>{const{type:t,autosize:f}=o;if(!(!D||t!=="textarea"||!I.value))if(f){const B=Pe(f)?f.minRows:void 0,xe=Pe(f)?f.maxRows:void 0,Ce=ze(I.value,B,xe);_.value={overflowY:"hidden",...Ce},k(()=>{I.value.offsetHeight,_.value=Ce})}else _.value={minHeight:ze(I.value).minHeight}},_e=(t=>{let f=!1;return()=>{var B;if(f||!o.autosize)return;((B=I.value)==null?void 0:B.offsetParent)===null||(t(),f=!0)}})(R),$=()=>{const t=N.value,f=o.formatter?o.formatter(P.value):P.value;!t||t.value===f||(t.value=f)},te=async t=>{Ke();let{value:f}=t.target;if(o.formatter&&(f=o.parser?o.parser(f):f),!ve.value){if(f===P.value){$();return}s(re,f),s("input",f),await k(),$(),We()}},fe=t=>{s("change",t.target.value)},{isComposing:ve,handleCompositionStart:me,handleCompositionUpdate:he,handleCompositionEnd:ye}=kt({emit:s,afterComposition:te}),je=()=>{W.value=!W.value,ge()},ge=async()=>{var t;await k(),(t=N.value)==null||t.focus()},Ue=()=>{var t;return(t=N.value)==null?void 0:t.blur()},Ye=t=>{J.value=!1,s("mouseleave",t)},Xe=t=>{J.value=!0,s("mouseenter",t)},be=t=>{s("keydown",t)},qe=()=>{var t;(t=N.value)==null||t.select()},we=()=>{s(re,""),s("change",""),s("clear"),s("input","")};return O(()=>o.modelValue,()=>{var t;k(()=>R()),o.validateEvent&&((t=v==null?void 0:v.validate)==null||t.call(v,"change").catch(f=>void 0))}),O(P,()=>$()),O(()=>o.type,async()=>{await k(),$(),R()}),Ve(()=>{!o.formatter&&o.parser,$(),k(R)}),n({input:K,textarea:I,ref:N,textareaStyle:pe,autosize:Be(o,"autosize"),isComposing:ve,focus:ge,blur:Ue,select:qe,clear:we,resizeTextarea:R}),(t,f)=>(h(),S("div",se(a(u),{class:[a(r),{[a(d).bm("group","append")]:t.$slots.append,[a(d).bm("group","prepend")]:t.$slots.prepend}],style:a(Me),role:t.containerRole,onMouseenter:Xe,onMouseleave:Ye}),[g(" input "),t.type!=="textarea"?(h(),S(ae,{key:0},[g(" prepend slot "),t.$slots.prepend?(h(),S("div",{key:0,class:w(a(d).be("group","prepend"))},[Y(t.$slots,"prepend")],2)):g("v-if",!0),H("div",{ref_key:"wrapperRef",ref:Le,class:w(a(c))},[g(" prefix slot "),t.$slots.prefix||t.prefixIcon?(h(),S("span",{key:0,class:w(a(d).e("prefix"))},[H("span",{class:w(a(d).e("prefix-inner"))},[Y(t.$slots,"prefix"),t.prefixIcon?(h(),F(a(M),{key:0,class:w(a(d).e("icon"))},{default:A(()=>[(h(),F(X(t.prefixIcon)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),H("input",se({id:a(y),ref_key:"input",ref:K,class:a(d).e("inner")},a(p),{minlength:t.minlength,maxlength:t.maxlength,type:t.showPassword?W.value?"text":"password":t.type,disabled:a(x),readonly:t.readonly,autocomplete:t.autocomplete,tabindex:t.tabindex,"aria-label":t.ariaLabel,placeholder:t.placeholder,style:t.inputStyle,form:t.form,autofocus:t.autofocus,onCompositionstart:a(me),onCompositionupdate:a(he),onCompositionend:a(ye),onInput:te,onChange:fe,onKeydown:be}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),g(" suffix slot "),a(De)?(h(),S("span",{key:1,class:w(a(d).e("suffix"))},[H("span",{class:w(a(d).e("suffix-inner"))},[!a(U)||!a(G)||!a(V)?(h(),S(ae,{key:0},[Y(t.$slots,"suffix"),t.suffixIcon?(h(),F(a(M),{key:0,class:w(a(d).e("icon"))},{default:A(()=>[(h(),F(X(t.suffixIcon)))]),_:1},8,["class"])):g("v-if",!0)],64)):g("v-if",!0),a(U)?(h(),F(a(M),{key:1,class:w([a(d).e("icon"),a(d).e("clear")]),onMousedown:lt(a(rt),["prevent"]),onClick:we},{default:A(()=>[st(a(vt))]),_:1},8,["class","onMousedown"])):g("v-if",!0),a(G)?(h(),F(a(M),{key:2,class:w([a(d).e("icon"),a(d).e("password")]),onClick:je},{default:A(()=>[(h(),F(X(a(Ae))))]),_:1},8,["class"])):g("v-if",!0),a(V)?(h(),S("span",{key:3,class:w(a(d).e("count"))},[H("span",{class:w(a(d).e("count-inner"))},q(a(ee))+" / "+q(t.maxlength),3)],2)):g("v-if",!0),a(L)&&a(de)&&a(ce)?(h(),F(a(M),{key:4,class:w([a(d).e("icon"),a(d).e("validateIcon"),a(d).is("loading",a(L)==="validating")])},{default:A(()=>[(h(),F(X(a(de))))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),t.$slots.append?(h(),S("div",{key:1,class:w(a(d).be("group","append"))},[Y(t.$slots,"append")],2)):g("v-if",!0)],64)):(h(),S(ae,{key:1},[g(" textarea "),H("textarea",se({id:a(y),ref_key:"textarea",ref:I,class:[a(ie).e("inner"),a(d).is("focus",a(j))]},a(p),{minlength:t.minlength,maxlength:t.maxlength,tabindex:t.tabindex,disabled:a(x),readonly:t.readonly,autocomplete:t.autocomplete,style:a(pe),"aria-label":t.ariaLabel,placeholder:t.placeholder,form:t.form,autofocus:t.autofocus,rows:t.rows,onCompositionstart:a(me),onCompositionupdate:a(he),onCompositionend:a(ye),onInput:te,onFocus:a(Re),onBlur:a($e),onChange:fe,onKeydown:be}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),a(V)?(h(),S("span",{key:0,style:it(ue.value),class:w(a(d).e("count"))},q(a(ee))+" / "+q(t.maxlength),7)):g("v-if",!0)],64))],16,["role"]))}});var Ot=Ge(Mt,[["__file","input.vue"]]);const oo=et(Ot),T=new Map;if(D){let e;document.addEventListener("mousedown",n=>e=n),document.addEventListener("mouseup",n=>{if(e){for(const s of T.values())for(const{documentHandler:o}of s)o(n,e);e=void 0}})}function ke(e,n){let s=[];return Array.isArray(n.arg)?s=n.arg:tt(n.arg)&&s.push(n.arg),function(o,l){const i=n.instance.popperRef,u=o.target,r=l==null?void 0:l.target,c=!n||!n.instance,p=!u||!r,b=e.contains(u)||e.contains(r),v=e===u,y=s.length&&s.some(x=>x==null?void 0:x.contains(u))||s.length&&s.includes(r),E=i&&(i.contains(u)||i.contains(r));c||p||b||v||y||E||n.value(o,l)}}const no={beforeMount(e,n){T.has(e)||T.set(e,[]),T.get(e).push({documentHandler:ke(e,n),bindingFn:n.value})},updated(e,n){T.has(e)||T.set(e,[]);const s=T.get(e),o=s.findIndex(i=>i.bindingFn===n.oldValue),l={documentHandler:ke(e,n),bindingFn:n.value};o>=0?s.splice(o,1,l):s.push(l)},unmounted(e){T.delete(e)}};export{no as C,oo as E,Vt as a,kt as b,zt as c,Gt as d,eo as g,to as s,Jt as t,Nt as u};
